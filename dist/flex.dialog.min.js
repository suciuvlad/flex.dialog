!function(){var t={};!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","wolfy87-eventemitter"],t):"undefined"!=typeof exports?module.exports=t(require("jquery"),require("wolfy87-eventemitter")):t(jQuery,EventEmitter)}(function(o,e){var i,n;return n={autoOpen:!0,evtCloseOnESC:!0,evtCloseOnOverlay:!0,overlayClass:"dlg--overlay",onShow:function(){},onClose:function(){}},t=function(t,e){return this.version="0.0.1",this.options=e,this.$elem=o(t),this.isShown=!1,this.config=i(this.options),this._setupBindings(),this},t.prototype.show=function(){return this.isShown?void 0:(this.isShown=!0,this.$elem.addClass("is-shown"),this.config.overlay.show(),this.options.onShow.call(this),this)},t.prototype.close=function(){return this.isShown?(this.isShown=!1,this.$elem.removeClass("is-shown"),this.config.overlay.close(),this.options.onClose.call(this),this):void 0},t.prototype._setupBindings=function(){var t=this;this.options.evtCloseOnESC&&o("body").keyup(function(o){27===o.which&&t.close()}),this.$elem.on("click",'[data-dialog="dismiss"]',o.proxy(this.close,this)),this.config.overlay.on("event:overlay:clicked",o.proxy(this.close,this))},t.prototype.defaults=n,e(t.prototype),i=function(o){var e={};return e.overlay=new t.Overlay(o),e},o.plugin=function(e,i){o.fn[e]=function(n){return this.each(function(){var s=o.data(this,"plugin_"+e),l=o.extend({},"object"==typeof n&&n),r=o(this).data(),a=o.extend({},t.prototype.defaults,l,r);s||o.data(this,"plugin_"+e,s=new i(this,a)),"string"==typeof n?s[n]():a.autoOpen&&s.show()})}},o.plugin("dialog",t),o(document).on("click",'[data-toggle="dialog"]',function(t){t.preventDefault();var e=o(this).attr("data-dialog-target");o(e).dialog()}),t.Overlay=function(t){var i=new e;return{show:function(){var e=o('<div class="'+t.overlayClass+'"></div>').appendTo("body");t.evtCloseOnOverlay&&e.on("click",function(t){i.emit("event:overlay:clicked")})},close:function(){var e="."+t.overlayClass,i=o(e);i.remove(),t.evtCloseOnOverlay&&i.off("click")},on:function(t,o){i.on(t,o)}}},t}),window.Flex=window.Flex||{},window.Flex.Dialog=t}();