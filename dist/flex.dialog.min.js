!function(){var o={};!function(o){"use strict";"function"==typeof define&&define.amd?define(["jquery","wolfy87-eventemitter"],o):"undefined"!=typeof exports?module.exports=o(require("jquery"),require("wolfy87-eventemitter")):o(jQuery,EventEmitter)}(function(t,e){var i,n;return n={autoOpen:!0,evtCloseOnESC:!0,evtCloseOnOverlay:!0,overlayClass:"dlg--overlay",onShow:function(){},onClose:function(){}},o=function(o,e){return this.version="0.0.1",this.options=e,this.$elem=t(o),this.isShown=!1,this.config=i(this.options),this._setupBindings(),this},o.prototype.show=function(){return this.isShown?void 0:(this.isShown=!0,this.$elem.addClass("is-shown"),this.config.overlay.show(),this.options.onShow.call(this),this)},o.prototype.close=function(){return this.isShown?(this.isShown=!1,this.$elem.removeClass("is-shown"),this.config.overlay.close(),this.options.onClose.call(this),this):void 0},o.prototype._setupBindings=function(){this.options.evtCloseOnESC&&t("body").keyup(keyup),this.$elem.on("click",'[data-dialog="dismiss"]',t.proxy(this.close,this)),this.config.overlay.on("event:overlay:clicked",t.proxy(this.close,this))},o.prototype._destroyBindings=function(){t("body").unbind("keyup",keyup),this.$elem.off("click",'[data-dialog="dismiss"]',t.proxy(this.close,this)),this.config.overlay.off("event:overlay:clicked",t.proxy(this.close,this))},o.prototype.destroy=function(){this.close(),this._destroyBindings(),this.$elem.removeData()},o.prototype.defaults=n,e(o.prototype),keyup=function(){t("body").keyup(function(o){27===o.which&&self.close()})},i=function(t){var e={};return e.overlay=new o.Overlay(t),e},t.plugin=function(e,i){t.fn[e]=function(n){return this.each(function(){var s=t.data(this,"plugin_"+e),l=t.extend({},"object"==typeof n&&n),r=t(this).data(),a=t.extend({},o.prototype.defaults,l,r);s||t.data(this,"plugin_"+e,s=new i(this,a)),"string"==typeof n?s[n]():a.autoOpen&&s.show()})}},t.plugin("dialog",o),t(document).on("click",'[data-toggle="dialog"]',function(o){o.preventDefault();var e=t(this).attr("data-dialog-target");t(e).dialog()}),o.Overlay=function(o){var i=new e;return{show:function(){var e=t('<div class="'+o.overlayClass+'"></div>').appendTo("body");o.evtCloseOnOverlay&&e.on("click",function(o){i.emit("event:overlay:clicked")})},close:function(){var e="."+o.overlayClass,i=t(e);i.remove(),o.evtCloseOnOverlay&&i.off("click")},on:function(o,t){i.on(o,t)},off:function(o,t){i.off(o,t)}}},o}),window.Flex=window.Flex||{},window.Flex.Dialog=o}();